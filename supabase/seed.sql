-- Create test user in auth.users
INSERT INTO auth.users (
  id,
  instance_id,
  email,
  encrypted_password,
  email_confirmed_at,
  recovery_sent_at,
  last_sign_in_at,
  raw_app_meta_data,
  raw_user_meta_data,
  created_at,
  updated_at,
  confirmation_token,
  email_change,
  email_change_token_new,
  recovery_token
) VALUES (
  '018a0f77-3000-0000-0000-000000000001',
  '00000000-0000-0000-0000-000000000000',
  'test@example.com',
  crypt('password123', gen_salt('bf')),
  now(),
  now(),
  now(),
  '{"provider":"email","providers":["email"]}',
  '{}',
  now(),
  now(),
  '',
  '',
  '',
  ''
);

-- Create identity for the test user
INSERT INTO auth.identities (
  id,
  user_id,
  identity_data,
  provider,
  provider_id,
  last_sign_in_at,
  created_at,
  updated_at
) VALUES (
  '018a0f77-3000-0000-0000-000000000001',
  '018a0f77-3000-0000-0000-000000000001',
  format('{"sub":"%s","email":"%s"}', '018a0f77-3000-0000-0000-000000000001', 'test@example.com')::jsonb,
  'email',
  'test@example.com',
  now(),
  now(),
  now()
);

-- Clean existing data
TRUNCATE TABLE teaching_assignments CASCADE;
TRUNCATE TABLE teacher_qualifications CASCADE;
TRUNCATE TABLE scheduled_lessons CASCADE;
TRUNCATE TABLE class_offerings CASCADE;
TRUNCATE TABLE teachers CASCADE;
TRUNCATE TABLE subjects CASCADE;
TRUNCATE TABLE time_slots CASCADE;
TRUNCATE TABLE class_sections CASCADE;
TRUNCATE TABLE terms CASCADE;
TRUNCATE TABLE academic_years CASCADE;
TRUNCATE TABLE schools CASCADE;

-- Insert school
INSERT INTO schools (id, name, created_at, user_id)
VALUES ('018a0f77-1000-0000-0000-000000000001', 'Demo High School', NOW(), '018a0f77-3000-0000-0000-000000000001');

-- Insert academic year
INSERT INTO academic_years (id, name, start_date, end_date, school_id, user_id)
VALUES ('018a0f77-2000-0000-0000-000000000001', '2025-2026', '2025-06-01', '2026-03-31', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001');

-- Insert term
INSERT INTO terms (id, name, start_date, end_date, academic_year_id, user_id, school_id)
VALUES ('018a0f77-3000-0000-0000-000000000001', 'Term 1', '2025-06-01', '2025-09-30', '018a0f77-2000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001', '018a0f77-1000-0000-0000-000000000001');

-- Insert class sections (Grade 11 and 12)
INSERT INTO class_sections (id, name, grade_level, school_id, student_count, user_id)
VALUES 
('018a0f77-4000-0000-0000-000000000001', '11A', 11, '018a0f77-1000-0000-0000-000000000001', 30, '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-4000-0000-0000-000000000002', '11B', 11, '018a0f77-1000-0000-0000-000000000001', 30, '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-4000-0000-0000-000000000003', '12A', 12, '018a0f77-1000-0000-0000-000000000001', 25, '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-4000-0000-0000-000000000004', '12B', 12, '018a0f77-1000-0000-0000-000000000001', 25, '018a0f77-3000-0000-0000-000000000001');

-- Insert subjects
INSERT INTO subjects (id, name, code, subject_type, school_id, user_id)
VALUES 
('018a0f77-5000-0000-0000-000000000001', 'Mathematics', 'MATH', 'core', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-5000-0000-0000-000000000002', 'Physics', 'PHY', 'science', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-5000-0000-0000-000000000003', 'Chemistry', 'CHEM', 'science', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-5000-0000-0000-000000000004', 'Biology', 'BIO', 'science', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-5000-0000-0000-000000000005', 'English', 'ENG', 'language', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-5000-0000-0000-000000000006', 'Computer Science', 'CS', 'elective', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001');

-- Insert teachers
INSERT INTO teachers (id, first_name, last_name, email, school_id, user_id)
VALUES 
('018a0f77-6000-0000-0000-000000000001', 'John', 'Smith', 'john.smith@demo.edu', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-6000-0000-0000-000000000002', 'Mary', 'Johnson', 'mary.johnson@demo.edu', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-6000-0000-0000-000000000003', 'Robert', 'Williams', 'robert.williams@demo.edu', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-6000-0000-0000-000000000004', 'Sarah', 'Brown', 'sarah.brown@demo.edu', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-6000-0000-0000-000000000005', 'Michael', 'Davis', 'michael.davis@demo.edu', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-6000-0000-0000-000000000006', 'Elizabeth', 'Miller', 'elizabeth.miller@demo.edu', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001');

-- Insert teacher qualifications
INSERT INTO teacher_qualifications (id, teacher_id, subject_id, school_id, user_id)
VALUES 
('018a0f77-7000-0000-0000-000000000001', '018a0f77-6000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000001', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000002', '018a0f77-6000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000002', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000003', '018a0f77-6000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000001', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000004', '018a0f77-6000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000003', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000005', '018a0f77-6000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000004', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000006', '018a0f77-6000-0000-0000-000000000005', '018a0f77-5000-0000-0000-000000000005', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000007', '018a0f77-6000-0000-0000-000000000006', '018a0f77-5000-0000-0000-000000000006', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-7000-0000-0000-000000000008', '018a0f77-6000-0000-0000-000000000006', '018a0f77-5000-0000-0000-000000000001', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001');

-- Insert class offerings
INSERT INTO class_offerings (id, class_section_id, subject_id, term_id, periods_per_week, school_id, user_id)
VALUES 
-- 11A offerings
('018a0f77-8000-0000-0000-000000000001', '018a0f77-4000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001', 6, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000002', '018a0f77-4000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000002', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000003', '018a0f77-4000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000003', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000004', '018a0f77-4000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000004', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000005', '018a0f77-4000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000005', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000006', '018a0f77-4000-0000-0000-000000000001', '018a0f77-5000-0000-0000-000000000006', '018a0f77-3000-0000-0000-000000000001', 2, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),

-- 11B offerings
('018a0f77-8000-0000-0000-000000000007', '018a0f77-4000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001', 6, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000008', '018a0f77-4000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000002', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000009', '018a0f77-4000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000003', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-00000000000a', '018a0f77-4000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000004', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-00000000000b', '018a0f77-4000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000005', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-00000000000c', '018a0f77-4000-0000-0000-000000000002', '018a0f77-5000-0000-0000-000000000006', '018a0f77-3000-0000-0000-000000000001', 2, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),

-- 12A offerings
('018a0f77-8000-0000-0000-00000000000d', '018a0f77-4000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001', 6, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-00000000000e', '018a0f77-4000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000002', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-00000000000f', '018a0f77-4000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000003', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000010', '018a0f77-4000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000004', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000011', '018a0f77-4000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000005', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000012', '018a0f77-4000-0000-0000-000000000003', '018a0f77-5000-0000-0000-000000000006', '018a0f77-3000-0000-0000-000000000001', 2, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),

-- 12B offerings
('018a0f77-8000-0000-0000-000000000013', '018a0f77-4000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001', 6, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000014', '018a0f77-4000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000002', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000015', '018a0f77-4000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000003', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000016', '018a0f77-4000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000004', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000017', '018a0f77-4000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000005', '018a0f77-3000-0000-0000-000000000001', 4, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-8000-0000-0000-000000000018', '018a0f77-4000-0000-0000-000000000004', '018a0f77-5000-0000-0000-000000000006', '018a0f77-3000-0000-0000-000000000001', 2, '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001');

-- Insert time slots (8 periods per day, 5 days per week)
DO $$
DECLARE
    day_num integer;
    period_num integer;
BEGIN
    FOR day_num IN 1..5 LOOP
        FOR period_num IN 1..8 LOOP
            INSERT INTO time_slots (id, day_of_week, start_time, end_time, is_teaching_period, school_id, user_id)
            VALUES (
                gen_random_uuid(),
                day_num,
                make_time(7 + period_num, 0, 0),
                make_time(8 + period_num, 0, 0),
                true,
                '018a0f77-1000-0000-0000-000000000001',
                '018a0f77-3000-0000-0000-000000000001'
            );
        END LOOP;
    END LOOP;
END $$;

-- Insert teaching assignments
INSERT INTO teaching_assignments (id, teacher_id, class_offering_id, school_id, user_id)
VALUES 
-- 11A assignments
('018a0f77-a000-0000-0000-000000000001', '018a0f77-6000-0000-0000-000000000001', '018a0f77-8000-0000-0000-000000000001', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000002', '018a0f77-6000-0000-0000-000000000002', '018a0f77-8000-0000-0000-000000000002', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000003', '018a0f77-6000-0000-0000-000000000003', '018a0f77-8000-0000-0000-000000000003', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000004', '018a0f77-6000-0000-0000-000000000004', '018a0f77-8000-0000-0000-000000000004', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000005', '018a0f77-6000-0000-0000-000000000005', '018a0f77-8000-0000-0000-000000000005', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000006', '018a0f77-6000-0000-0000-000000000006', '018a0f77-8000-0000-0000-000000000006', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
-- 11B assignments
('018a0f77-a000-0000-0000-000000000007', '018a0f77-6000-0000-0000-000000000001', '018a0f77-8000-0000-0000-000000000007', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000008', '018a0f77-6000-0000-0000-000000000002', '018a0f77-8000-0000-0000-000000000008', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000009', '018a0f77-6000-0000-0000-000000000003', '018a0f77-8000-0000-0000-000000000009', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-00000000000a', '018a0f77-6000-0000-0000-000000000004', '018a0f77-8000-0000-0000-00000000000a', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-00000000000b', '018a0f77-6000-0000-0000-000000000005', '018a0f77-8000-0000-0000-00000000000b', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-00000000000c', '018a0f77-6000-0000-0000-000000000006', '018a0f77-8000-0000-0000-00000000000c', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
-- 12A assignments
('018a0f77-a000-0000-0000-00000000000d', '018a0f77-6000-0000-0000-000000000001', '018a0f77-8000-0000-0000-00000000000d', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-00000000000e', '018a0f77-6000-0000-0000-000000000002', '018a0f77-8000-0000-0000-00000000000e', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-00000000000f', '018a0f77-6000-0000-0000-000000000003', '018a0f77-8000-0000-0000-00000000000f', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000010', '018a0f77-6000-0000-0000-000000000004', '018a0f77-8000-0000-0000-000000000010', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000011', '018a0f77-6000-0000-0000-000000000005', '018a0f77-8000-0000-0000-000000000011', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000012', '018a0f77-6000-0000-0000-000000000006', '018a0f77-8000-0000-0000-000000000012', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
-- 12B assignments
('018a0f77-a000-0000-0000-000000000013', '018a0f77-6000-0000-0000-000000000006', '018a0f77-8000-0000-0000-000000000013', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000014', '018a0f77-6000-0000-0000-000000000002', '018a0f77-8000-0000-0000-000000000014', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000015', '018a0f77-6000-0000-0000-000000000003', '018a0f77-8000-0000-0000-000000000015', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000016', '018a0f77-6000-0000-0000-000000000004', '018a0f77-8000-0000-0000-000000000016', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000017', '018a0f77-6000-0000-0000-000000000005', '018a0f77-8000-0000-0000-000000000017', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001'),
('018a0f77-a000-0000-0000-000000000018', '018a0f77-6000-0000-0000-000000000006', '018a0f77-8000-0000-0000-000000000018', '018a0f77-1000-0000-0000-000000000001', '018a0f77-3000-0000-0000-000000000001');
